version: 1.0
frontend:
  phases:
    preBuild:
      commands:
        # Install fvm (Flutter Version Management)
        - curl -sL https://firebase.tools | bash
        - dart pub global activate fvm
        - export PATH="$PATH:$HOME/.pub-cache/bin"
        
        # Set up the required Flutter version via fvm
        - fvm install 3.10.6
        - fvm use 3.10.6
        - fvm flutter doctor
        
        # Enable Flutter web
        - fvm flutter config --enable-web
        - fvm flutter pub get
    build:
      commands:
        - fvm flutter build web --release
  artifacts:
    baseDirectory: build/web
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
      - .pub-cache
      - .fvm